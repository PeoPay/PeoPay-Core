# Aderyn Analysis Report

This report was generated by [Aderyn](https://github.com/Cyfrin/aderyn), a static analysis tool built by [Cyfrin](https://cyfrin.io), a blockchain security company. This report is not a substitute for manual audit or security review. It should not be relied upon for any purpose other than to assist in the identification of potential security vulnerabilities.
# Table of Contents

- [Summary](#summary)
  - [Files Summary](#files-summary)
  - [Files Details](#files-details)
  - [Issue Summary](#issue-summary)
- [Low Issues](#low-issues)
  - [L-1: Centralization Risk for trusted owners](#l-1-centralization-risk-for-trusted-owners)
  - [L-2: Unsafe ERC20 Operations should not be used](#l-2-unsafe-erc20-operations-should-not-be-used)
  - [L-3: Solidity pragma should be specific, not wide](#l-3-solidity-pragma-should-be-specific-not-wide)
  - [L-4: Missing checks for `address(0)` when assigning values to address state variables](#l-4-missing-checks-for-address0-when-assigning-values-to-address-state-variables)
  - [L-5: Define and use `constant` variables instead of using literals](#l-5-define-and-use-constant-variables-instead-of-using-literals)
  - [L-6: Event is missing `indexed` fields](#l-6-event-is-missing-indexed-fields)
  - [L-7: PUSH0 is not supported by all chains](#l-7-push0-is-not-supported-by-all-chains)
  - [L-8: Large literal values multiples of 10000 can be replaced with scientific notation](#l-8-large-literal-values-multiples-of-10000-can-be-replaced-with-scientific-notation)
  - [L-9: Potentially missing inheritance for contract.](#l-9-potentially-missing-inheritance-for-contract)
  - [L-10: Unused Imports](#l-10-unused-imports)
  - [L-11: State variable could be declared constant](#l-11-state-variable-could-be-declared-constant)
  - [L-12: State variable changes but no event is emitted.](#l-12-state-variable-changes-but-no-event-is-emitted)
  - [L-13: State variable could be declared immutable](#l-13-state-variable-could-be-declared-immutable)


# Summary

## Files Summary

| Key | Value |
| --- | --- |
| .sol Files | 9 |
| Total nSLOC | 213 |


## Files Details

| Filepath | nSLOC |
| --- | --- |
| contracts/Conversion.sol | 23 |
| contracts/DCS.sol | 31 |
| contracts/Governance.sol | 74 |
| contracts/PeoCoin.sol | 17 |
| contracts/Staking.sol | 43 |
| contracts/interfaces/IDCS.sol | 4 |
| contracts/interfaces/IPeoCoin.sol | 7 |
| contracts/interfaces/IStaking.sol | 8 |
| contracts/mocks/MockStaking.sol | 6 |
| **Total** | **213** |


## Issue Summary

| Category | No. of Issues |
| --- | --- |
| High | 0 |
| Low | 13 |


# Low Issues

## L-1: Centralization Risk for trusted owners

Contracts have owners with privileged rights to perform admin tasks and need to be trusted to not perform malicious updates or drain funds.

<details><summary>6 Found Instances</summary>


- Found in contracts/DCS.sol [Line: 12](contracts/DCS.sol#L12)

	```solidity
	contract DCS is Ownable {
	```

- Found in contracts/DCS.sol [Line: 65](contracts/DCS.sol#L65)

	```solidity
	    function updateWeights(uint256 _tokenWeight, uint256 _stakeWeight, uint256 _timeWeight) external onlyOwner {
	```

- Found in contracts/Governance.sol [Line: 12](contracts/Governance.sol#L12)

	```solidity
	contract Governance is Ownable {
	```

- Found in contracts/Governance.sol [Line: 138](contracts/Governance.sol#L138)

	```solidity
	    function updateParameters(uint256 _votingPeriod, uint256 _quorum, uint256 _majorityPercentage) external onlyOwner {
	```

- Found in contracts/PeoCoin.sol [Line: 16](contracts/PeoCoin.sol#L16)

	```solidity
	contract PeoCoin is ERC20, Ownable {
	```

- Found in contracts/PeoCoin.sol [Line: 29](contracts/PeoCoin.sol#L29)

	```solidity
	    function mint(address to, uint256 amount) external onlyOwner {
	```

</details>



## L-2: Unsafe ERC20 Operations should not be used

ERC20 functions may not behave as expected. For example: return values are not always meaningful. It is recommended to use OpenZeppelin's SafeERC20 library.

<details><summary>3 Found Instances</summary>


- Found in contracts/Conversion.sol [Line: 51](contracts/Conversion.sol#L51)

	```solidity
	        bool success = peoToken.transferFrom(msg.sender, address(this), amount);
	```

- Found in contracts/Staking.sol [Line: 52](contracts/Staking.sol#L52)

	```solidity
	        bool success = peoToken.transferFrom(msg.sender, address(this), amount);
	```

- Found in contracts/Staking.sol [Line: 95](contracts/Staking.sol#L95)

	```solidity
	        bool success = peoToken.transfer(msg.sender, info.amount + reward);
	```

</details>



## L-3: Solidity pragma should be specific, not wide

Consider using a specific version of Solidity in your contracts instead of a wide version. For example, instead of `pragma solidity ^0.8.0;`, use `pragma solidity 0.8.0;`

<details><summary>9 Found Instances</summary>


- Found in contracts/Conversion.sol [Line: 2](contracts/Conversion.sol#L2)

	```solidity
	pragma solidity ^0.8.28;
	```

- Found in contracts/DCS.sol [Line: 2](contracts/DCS.sol#L2)

	```solidity
	pragma solidity ^0.8.28;
	```

- Found in contracts/Governance.sol [Line: 2](contracts/Governance.sol#L2)

	```solidity
	pragma solidity ^0.8.28;
	```

- Found in contracts/PeoCoin.sol [Line: 2](contracts/PeoCoin.sol#L2)

	```solidity
	pragma solidity ^0.8.28;
	```

- Found in contracts/Staking.sol [Line: 2](contracts/Staking.sol#L2)

	```solidity
	pragma solidity ^0.8.28;
	```

- Found in contracts/interfaces/IDCS.sol [Line: 2](contracts/interfaces/IDCS.sol#L2)

	```solidity
	pragma solidity ^0.8.28;
	```

- Found in contracts/interfaces/IPeoCoin.sol [Line: 2](contracts/interfaces/IPeoCoin.sol#L2)

	```solidity
	pragma solidity ^0.8.28;
	```

- Found in contracts/interfaces/IStaking.sol [Line: 2](contracts/interfaces/IStaking.sol#L2)

	```solidity
	pragma solidity ^0.8.28;
	```

- Found in contracts/mocks/MockStaking.sol [Line: 2](contracts/mocks/MockStaking.sol#L2)

	```solidity
	pragma solidity ^0.8.28;
	```

</details>



## L-4: Missing checks for `address(0)` when assigning values to address state variables

Check for `address(0)` when assigning values to address state variables.

<details><summary>7 Found Instances</summary>


- Found in contracts/Conversion.sol [Line: 38](contracts/Conversion.sol#L38)

	```solidity
	        peoToken = IPeoCoin(_peoToken);
	```

- Found in contracts/Conversion.sol [Line: 39](contracts/Conversion.sol#L39)

	```solidity
	        backendService = _backendService;
	```

- Found in contracts/DCS.sol [Line: 33](contracts/DCS.sol#L33)

	```solidity
	        peoToken = IPeoCoin(_peoToken);
	```

- Found in contracts/DCS.sol [Line: 34](contracts/DCS.sol#L34)

	```solidity
	        staking = IStaking(_staking);
	```

- Found in contracts/Governance.sol [Line: 65](contracts/Governance.sol#L65)

	```solidity
	        peoToken = IPeoCoin(_peoToken);
	```

- Found in contracts/Governance.sol [Line: 66](contracts/Governance.sol#L66)

	```solidity
	        dcs = IDCS(_dcs);
	```

- Found in contracts/Staking.sol [Line: 41](contracts/Staking.sol#L41)

	```solidity
	        peoToken = IPeoCoin(_peoToken);
	```

</details>



## L-5: Define and use `constant` variables instead of using literals

If the same constant literal value is used multiple times, create a constant state variable and reference it throughout the contract.

<details><summary>3 Found Instances</summary>


- Found in contracts/Staking.sol [Line: 76](contracts/Staking.sol#L76)

	```solidity
	        uint256 baseReward = (info.amount * baseAPY * stakedDays) / (365 * 100);
	```

- Found in contracts/Staking.sol [Line: 79](contracts/Staking.sol#L79)

	```solidity
	        uint256 bonus = (baseReward * (tierMultiplier - 100)) / 100;
	```

</details>



## L-6: Event is missing `indexed` fields

Index event fields make the field more quickly accessible to off-chain tools that parse events. However, note that each index field costs extra gas during emission, so it's not necessarily best to index the maximum allowed per event (three fields). Each event should use three indexed fields if there are three or more fields, and gas usage is not particularly of concern for the events in question. If there are fewer than three fields, all of the fields should be indexed.

<details><summary>5 Found Instances</summary>


- Found in contracts/Conversion.sol [Line: 25](contracts/Conversion.sol#L25)

	```solidity
	    event ConversionRequested(address indexed user, uint256 amount, string mobileNumber, string currency);
	```

- Found in contracts/Conversion.sol [Line: 31](contracts/Conversion.sol#L31)

	```solidity
	    event ConversionConfirmed(address indexed user, uint256 amount, string mobileNumber);
	```

- Found in contracts/Governance.sol [Line: 47](contracts/Governance.sol#L47)

	```solidity
	    event ProposalCreated(uint256 proposalId, address proposer, string description);
	```

- Found in contracts/Governance.sol [Line: 54](contracts/Governance.sol#L54)

	```solidity
	    event VoteCast(uint256 proposalId, address voter, bool support, uint256 weight);
	```

- Found in contracts/Governance.sol [Line: 58](contracts/Governance.sol#L58)

	```solidity
	    event ProposalExecuted(uint256 proposalId);
	```

</details>



## L-7: PUSH0 is not supported by all chains

Solc compiler version 0.8.20 switches the default target EVM version to Shanghai, which means that the generated bytecode will include PUSH0 opcodes. Be sure to select the appropriate EVM version in case you intend to deploy on a chain other than mainnet like L2 chains that may not support PUSH0, otherwise deployment of your contracts will fail.

<details><summary>9 Found Instances</summary>


- Found in contracts/Conversion.sol [Line: 2](contracts/Conversion.sol#L2)

	```solidity
	pragma solidity ^0.8.28;
	```

- Found in contracts/DCS.sol [Line: 2](contracts/DCS.sol#L2)

	```solidity
	pragma solidity ^0.8.28;
	```

- Found in contracts/Governance.sol [Line: 2](contracts/Governance.sol#L2)

	```solidity
	pragma solidity ^0.8.28;
	```

- Found in contracts/PeoCoin.sol [Line: 2](contracts/PeoCoin.sol#L2)

	```solidity
	pragma solidity ^0.8.28;
	```

- Found in contracts/Staking.sol [Line: 2](contracts/Staking.sol#L2)

	```solidity
	pragma solidity ^0.8.28;
	```

- Found in contracts/interfaces/IDCS.sol [Line: 2](contracts/interfaces/IDCS.sol#L2)

	```solidity
	pragma solidity ^0.8.28;
	```

- Found in contracts/interfaces/IPeoCoin.sol [Line: 2](contracts/interfaces/IPeoCoin.sol#L2)

	```solidity
	pragma solidity ^0.8.28;
	```

- Found in contracts/interfaces/IStaking.sol [Line: 2](contracts/interfaces/IStaking.sol#L2)

	```solidity
	pragma solidity ^0.8.28;
	```

- Found in contracts/mocks/MockStaking.sol [Line: 2](contracts/mocks/MockStaking.sol#L2)

	```solidity
	pragma solidity ^0.8.28;
	```

</details>



## L-8: Large literal values multiples of 10000 can be replaced with scientific notation

Use `e` notation, for example: `1e18`, instead of its full numeric value.

<details><summary>1 Found Instances</summary>


- Found in contracts/PeoCoin.sol [Line: 21](contracts/PeoCoin.sol#L21)

	```solidity
	        _mint(msg.sender, 1_000_000 * 10**decimals());
	```

</details>



## L-9: Potentially missing inheritance for contract.

There is an interface / abstract contract that is potentially missing (not included in) the inheritance of this contract.

<details><summary>2 Found Instances</summary>


- Found in contracts/Staking.sol [Line: 11](contracts/Staking.sol#L11)

	Is this contract supposed to implement an interface? Consider extending one of the following: IStaking
	```solidity
	contract Staking {
	```

- Found in contracts/mocks/MockStaking.sol [Line: 8](contracts/mocks/MockStaking.sol#L8)

	Is this contract supposed to implement an interface? Consider extending one of the following: IStaking
	```solidity
	contract MockStaking {
	```

</details>



## L-10: Unused Imports

Redundant import statement. Consider removing it.

<details><summary>1 Found Instances</summary>


- Found in contracts/Conversion.sol [Line: 5](contracts/Conversion.sol#L5)

	```solidity
	import "./interfaces/IDCS.sol"; 
	```

</details>



## L-11: State variable could be declared constant

State variables that are not updated following deployment should be declared constant to save gas. Add the `constant` attribute to state variables that never change.

<details><summary>3 Found Instances</summary>


- Found in contracts/Staking.sol [Line: 27](contracts/Staking.sol#L27)

	```solidity
	    uint256 public baseAPY = 10;
	```

- Found in contracts/Staking.sol [Line: 31](contracts/Staking.sol#L31)

	```solidity
	    uint256 public lockPeriod = 30 days;
	```

- Found in contracts/Staking.sol [Line: 35](contracts/Staking.sol#L35)

	```solidity
	    uint256 public bronzeMultiplier = 100;
	```

</details>



## L-12: State variable changes but no event is emitted.

State variable changes in this function but no event is emitted.

<details><summary>4 Found Instances</summary>


- Found in contracts/DCS.sol [Line: 65](contracts/DCS.sol#L65)

	```solidity
	    function updateWeights(uint256 _tokenWeight, uint256 _stakeWeight, uint256 _timeWeight) external onlyOwner {
	```

- Found in contracts/Governance.sol [Line: 138](contracts/Governance.sol#L138)

	```solidity
	    function updateParameters(uint256 _votingPeriod, uint256 _quorum, uint256 _majorityPercentage) external onlyOwner {
	```

- Found in contracts/Staking.sol [Line: 48](contracts/Staking.sol#L48)

	```solidity
	    function stake(uint256 amount) external {
	```

- Found in contracts/Staking.sol [Line: 87](contracts/Staking.sol#L87)

	```solidity
	    function unstake() external {
	```

</details>



## L-13: State variable could be declared immutable

State variables that are should be declared immutable to save gas. Add the `immutable` attribute to state variables that are only changed in the constructor

<details><summary>7 Found Instances</summary>


- Found in contracts/Conversion.sol [Line: 14](contracts/Conversion.sol#L14)

	```solidity
	    IPeoCoin public peoToken;
	```

- Found in contracts/Conversion.sol [Line: 18](contracts/Conversion.sol#L18)

	```solidity
	    address public backendService;
	```

- Found in contracts/DCS.sol [Line: 14](contracts/DCS.sol#L14)

	```solidity
	    IPeoCoin public peoToken;
	```

- Found in contracts/DCS.sol [Line: 17](contracts/DCS.sol#L17)

	```solidity
	    IStaking public staking;
	```

- Found in contracts/Governance.sol [Line: 14](contracts/Governance.sol#L14)

	```solidity
	    IPeoCoin public peoToken;
	```

- Found in contracts/Governance.sol [Line: 17](contracts/Governance.sol#L17)

	```solidity
	    IDCS public dcs;
	```

- Found in contracts/Staking.sol [Line: 13](contracts/Staking.sol#L13)

	```solidity
	    IPeoCoin public peoToken;
	```

</details>



